<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consulta por Ubicación</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="/css/ubicaciones.css" />
</head>
<body>
        <!-- Formulario de consulta -->
        <form id="locationForm">
            <img src="logo.png" alt="Logo" id="logo">
            <h1 id="header">Consulta por Ubicación</h1>

            <!-- Comentario para el usuario -->
            <div id="map-instructions">
                <p><strong>Por favor, seleccione una fecha inicial y un lugar en el mapa para realizar la consulta.</strong></p>
            </div>
                        

            <!-- Campo para seleccionar la fecha inicial -->
            <div class="row">
                <div class="column">
                    <p><strong>Fecha Inicial:</strong></p>
                    <input type="datetime-local" id="startDate" required>
                </div>
            </div>

            <div class="button-container">
                <button type="submit">Consultar</button>
                <button onclick="window.history.back()">Retroceder</button>
            </div>
                    



            <!-- Tabla de resultados -->
            <table id="resultTable" border="1" style="margin-top: 20px;">
                <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>Hora</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </form>

        <!-- Mapa -->
        <div id="map"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="/js/ubicaciones.js"></script>

    <!-- Validación de fecha no mayor a la actual -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const startDateInput = document.getElementById('startDate');

            // Definir la fecha y hora actuales como el valor máximo permitido
            const now = new Date().toISOString().slice(0, 16); // Recortar a "YYYY-MM-DDTHH:MM"
            startDateInput.max = now;

            // Evitar que se seleccione una fecha mayor a la actual
            startDateInput.addEventListener('input', function () {
                if (this.value > now) {
                    alert("La fecha seleccionada no puede ser mayor a la fecha y hora actuales.");
                    this.value = now; // Restablecer al valor máximo permitido
                }
            });
        });
    </script>
</body>
</html>
